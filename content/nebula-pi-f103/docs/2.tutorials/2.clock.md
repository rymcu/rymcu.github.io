---
title: 时钟配置
description: 本章节将介绍如何配置时钟。
---

## 1.前期准备

在第一章工程基础之上实现以下功能：

1)主时钟配置为`72MHz`;

2)主程序中`1s`切换一次`LED1`亮灭状态，验证时钟是否配置成功；

3）`GPIO`口输出主时钟，使用示波器测试时钟周期，验证时钟的正确性。

## 2.创建项目

双击`Temp.ioc`，进入`STM32CubeMX`编辑页面

**步骤一： 选择外部时钟**

星允派板载`8MHz`和`32.768KHz`外部时钟，在软件界面上进行配置即可使用，同时配置`GPIO`口`PA8`输出主时钟，用于测试配置的正确性，具体操作如下：

![](/images/nebula-pi-f103/clock/clk1.png)

**步骤二：主时钟配置为`72MHz`**

<img src="/images/nebula-pi-f103/clock/clk2.png" style="zoom:75%;" />

上图中主时钟配置为`72MHz`，`PA8`输出为主时钟的一半，即`36MHz`。

## 3.编辑代码

打开创建的工程，找到源文件夹`Src`的`main.c`，并在`while(1)` 循环中`1s`切换`LED1`亮灭代码如下。

```c
  while (1)
  {
    /* USER CODE END WHILE */

    /* USER CODE BEGIN 3 */
    //闪烁LED1
    HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);//切换亮灭状
    HAL_Delay(1000);//延时1000ms
  }
  /* USER CODE END 3 */
}
```

## 4.编译下载

按照第一章`2.2`小结方法编译，将程序下载至开发板，观察`LED1`灯亮灭情况，并使用示波器观察`PA8`时钟输出情况。

![](/images/nebula-pi-f103/clock/clk3.png)

## 5.小节

本章内容相对简单，图形化界面配置时钟。
